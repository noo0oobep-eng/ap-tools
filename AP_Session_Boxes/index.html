<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>AP Session Boxes — Docs</title>
<style>
:root{--bg:#0b0f14;--card:#121822;--text:#e8eef6;--muted:#9fb0c3;--accent:#58a6ff}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.wrap{max-width:900px;margin:0 auto;padding:24px}
h1{margin:0 0 8px;font-size:28px}
.lead{color:var(--muted);margin:0 0 18px}
.btns{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 24px}
a.btn,
button.btn{
  display:inline-block;
  text-decoration:none;
  color:#000;
  background:var(--accent);
  padding:8px 12px;
  border-radius:10px;
  font-weight:600;
  border:none;
  cursor:pointer;
}
a.ghost{
  background:transparent;
  color:var(--accent);
  border:1px solid var(--accent);
}
.card{
  background:#121822;
  border:1px solid #1d2633;
  border-radius:14px;
  padding:18px;
  margin:14px 0;
}
h2{margin:8px 0 6px}
ul,ol{margin:6px 0 0 18px}
footer{color:var(--muted);text-align:center;padding:28px;font-size:14px}
form{margin:0}
label{display:block;margin-bottom:8px;font-size:14px;color:var(--muted)}
input[type="email"]{
  width:100%;
  max-width:320px;
  padding:8px 10px;
  border-radius:8px;
  border:1px solid #2b3850;
  background:#0f1520;
  color:var(--text);
}
.small-note{font-size:13px;color:var(--muted);margin-top:6px}
</style>
</head>
<body>
  <div class="wrap">
    <a class="ghost btn" href="/" rel="noopener">← Back to Home</a>

    <h1>AP Session Boxes</h1>
    <p class="lead">
      Clean London/NY/Asia boxes with custom times, opacity, and lookback.
      Neutral and screenshot-friendly.
    </p>

    <!-- Email gate + download -->
    <div class="card">
      <h2>Get the indicator (free)</h2>
      <form
        id="session-boxes-download"
        action="https://formspree.io/f/xkgkrzye"
        method="POST"
      >
        <label>
          Email address
          <input type="email" name="email" required autocomplete="email" />
        </label>
        <div class="btns">
          <button type="submit" class="btn">Download Free (MT5)</button>
        </div>
        <p class="small-note">
          We’ll send the download event to Formspree so you’re notified
          when someone grabs this tool. The file downloads immediately after you click.
        </p>
      </form>
    </div>

    <div class="card">
      <h2>Quick Start</h2>
      <ol>
        <li>Attach to any chart / timeframe you like.</li>
        <li>Set session server times for London, New York, and Asia.</li>
        <li>Adjust colors/opacity and the lookback bars.</li>
        <li>Optionally extend today’s box to the current candle.</li>
      </ol>
    </div>

    <div class="card">
      <h2>Main Inputs (summary)</h2>
      <ul>
        <li><b>Show Asia / London / NY</b> – toggle per session.</li>
        <li><b>Start/End (HH:MM)</b> – server-time windows per session.</li>
        <li><b>Opacity / Fill / Border</b> – visual styling.</li>
        <li><b>LookbackBars</b> – how many past sessions to draw.</li>
        <li><b>ExtendToday</b> – extend today’s box to “now”.</li>
      </ul>
    </div>

    <div class="card">
      <h2>Notes</h2>
      <ul>
        <li>No performance gimmicks; just clear session context.</li>
        <li>Support via MQL5 messages/comments only.</li>
      </ul>
    </div>

    <footer>© AP Trading Tools • Built for MetaTrader 5</footer>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('session-boxes-download');
    if (!form) return;

    const button = form.querySelector('button[type="submit"]');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      if (button) {
        button.disabled = true;
        button.textContent = 'Sending...';
      }

      // Send email to Formspree in the background
      fetch(form.action, {
        method: 'POST',
        headers: { 'Accept': 'application/json' },
        body: new FormData(form)
      }).catch(() => {
        // even if it fails, still allow the download
      }).finally(() => {
        if (button) {
          button.disabled = false;
          button.textContent = 'Download Free (MT5)';
        }
        // Trigger the zip download from this same page
        window.location.href = './AP_Session_Boxes_MT5.zip';
      });
    });
  });
  </script>
</body>
</html>
